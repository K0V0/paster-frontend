{"ast":null,"code":"import { FormControl, FormGroup, Validators } from \"@angular/forms\";\nimport { BaseComponent } from \"../../../../_Base/components/base.component\";\nimport { CustomValidators } from \"../../validation-errors/validators/custom.validator\";\nimport { UserRegistrationValidators } from \"../utils/register.validator\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/register.service\";\nimport * as i2 from \"../../login/services/login.service\";\nimport * as i3 from \"./../../notification/notification.service\";\nimport * as i4 from \"./../../translate/translate.service\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"../../validation-errors/server-side/server-field-error.component\";\nimport * as i8 from \"../../validation-errors/server-side/server-form-error.component\";\nimport * as i9 from \"../../validation-errors/frontend-side/local-field-error.component\";\nimport * as i10 from \"../../validation-errors/frontend-side/local-form-error.component\";\nimport * as i11 from \"../../translate/translate.pipe\";\nexport let RegisterComponent = /*#__PURE__*/(() => {\n  class RegisterComponent extends BaseComponent {\n    // TODO servica ktora by pri dopisani mena spravila request na backend pre zistenie\n    //  ci nie je uz obsadene\n    // TODO custom input validations podla backendu na backend chcem posielat len overovanie\n    //  ci uzivatel uz existuje a podobne\n    constructor(registerService, loginService, notificationService, translateService, router) {\n      super(router);\n      this.registerService = registerService;\n      this.loginService = loginService;\n      this.notificationService = notificationService;\n      this.translateService = translateService;\n      this.router = router;\n      this.title = 'Register new user';\n      this.user = new FormControl(\"\", [Validators.required, CustomValidators.forbiddenCharacters]);\n      this.pass = new FormControl(\"\", [Validators.required, Validators.minLength(6), CustomValidators.forbiddenCharacters]);\n      this.pass2 = new FormControl(\"\", [Validators.required]);\n      this.email = new FormControl(\"\", [Validators.required, Validators.email]);\n      this.gdpr = new FormControl(false, [Validators.requiredTrue]);\n      this.register = new FormGroup({\n        'user': this.user,\n        'pass': this.pass,\n        'pass2': this.pass2,\n        'email': this.email,\n        'gdpr': this.gdpr\n      }, {\n        validators: [UserRegistrationValidators.passwordMatch]\n      });\n    }\n    ngOnInit() {\n      this.register.valueChanges.subscribe(() => {\n        this.clearAllServerErrors();\n      });\n    }\n    doRegistration() {\n      this.registerService.doRegister(this.user.value, this.pass.value, this.pass2.value, this.email.value, this.gdpr.value).subscribe(data => {\n        this.loginService.saveJwtToken(data.jwtToken);\n        this.notificationService.notify(this.translateService.translate(\"register.welcomeNotification\"));\n        this.router.navigate(['board']);\n      }, error => {\n        this.setAllServerErrors(error);\n      }, () => {\n        this.clearAllServerErrors();\n      });\n    }\n    checkName(name) {}\n  }\n  RegisterComponent.ɵfac = function RegisterComponent_Factory(t) {\n    return new (t || RegisterComponent)(i0.ɵɵdirectiveInject(i1.RegisterService), i0.ɵɵdirectiveInject(i2.LoginService), i0.ɵɵdirectiveInject(i3.NotificationService), i0.ɵɵdirectiveInject(i4.TranslateService), i0.ɵɵdirectiveInject(i5.Router));\n  };\n  RegisterComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: RegisterComponent,\n    selectors: [[\"app-register\"]],\n    features: [i0.ɵɵInheritDefinitionFeature],\n    decls: 39,\n    vars: 32,\n    consts: [[1, \"register\", 3, \"formGroup\", \"ngSubmit\"], [1, \"wrap\"], [\"type\", \"text\", \"formControlName\", \"user\", 3, \"placeholder\"], [\"fieldRef\", \"user\", \"formGroupRef\", \"register\", 3, \"parentComponentContext\"], [\"fieldRef\", \"user\", 3, \"errorsObject\"], [\"type\", \"text\", \"formControlName\", \"email\", 3, \"placeholder\"], [\"fieldRef\", \"email\", \"formGroupRef\", \"register\", 3, \"parentComponentContext\"], [\"fieldRef\", \"email\", 3, \"errorsObject\"], [\"type\", \"password\", \"formControlName\", \"pass\", 3, \"placeholder\"], [\"fieldRef\", \"pass\", \"formGroupRef\", \"register\", 3, \"parentComponentContext\"], [\"fieldRef\", \"pass\", 3, \"errorsObject\"], [\"type\", \"password\", \"formControlName\", \"pass2\", 3, \"placeholder\"], [\"fieldRef\", \"pass2\", \"formGroupRef\", \"register\", 3, \"parentComponentContext\"], [\"fieldRef\", \"pass2\", 3, \"errorsObject\"], [1, \"gdprAccept\"], [\"type\", \"checkbox\", \"formControlName\", \"gdpr\"], [\"for\", \"gdpr\"], [\"fieldRef\", \"gdpr\", \"formGroupRef\", \"register\", 3, \"parentComponentContext\"], [\"fieldRef\", \"gdpr\", 3, \"errorsObject\"], [1, \"text-right\"], [3, \"disabled\"], [\"formGroupRef\", \"register\", 3, \"parentComponentContext\"], [3, \"errorsObject\"]],\n    template: function RegisterComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"form\", 0);\n        i0.ɵɵlistener(\"ngSubmit\", function RegisterComponent_Template_form_ngSubmit_0_listener() {\n          return ctx.doRegistration();\n        });\n        i0.ɵɵelementStart(1, \"div\")(2, \"div\", 1);\n        i0.ɵɵelement(3, \"input\", 2);\n        i0.ɵɵpipe(4, \"t\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(5, \"app-local-field-error\", 3)(6, \"app-server-field-error\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"div\")(8, \"div\", 1);\n        i0.ɵɵelement(9, \"input\", 5);\n        i0.ɵɵpipe(10, \"t\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(11, \"app-local-field-error\", 6)(12, \"app-server-field-error\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"div\")(14, \"div\", 1);\n        i0.ɵɵelement(15, \"input\", 8);\n        i0.ɵɵpipe(16, \"t\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(17, \"app-local-field-error\", 9)(18, \"app-server-field-error\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"div\")(20, \"div\", 1);\n        i0.ɵɵelement(21, \"input\", 11);\n        i0.ɵɵpipe(22, \"t\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(23, \"app-local-field-error\", 12)(24, \"app-server-field-error\", 13);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"div\", 14)(26, \"div\", 1);\n        i0.ɵɵelement(27, \"input\", 15);\n        i0.ɵɵelementStart(28, \"label\", 16);\n        i0.ɵɵtext(29);\n        i0.ɵɵpipe(30, \"t\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(31, \"app-local-field-error\", 17)(32, \"app-server-field-error\", 18);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(33, \"div\", 19)(34, \"button\", 20);\n        i0.ɵɵtext(35);\n        i0.ɵɵpipe(36, \"t\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(37, \"app-local-form-error\", 21)(38, \"app-server-form-error\", 22);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"formGroup\", ctx.register);\n        i0.ɵɵadvance(3);\n        i0.ɵɵpropertyInterpolate(\"placeholder\", i0.ɵɵpipeBind1(4, 20, \"register.page.user\"));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"parentComponentContext\", ctx);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"errorsObject\", ctx.serverFieldsErrors);\n        i0.ɵɵadvance(3);\n        i0.ɵɵpropertyInterpolate(\"placeholder\", i0.ɵɵpipeBind1(10, 22, \"register.page.email\"));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"parentComponentContext\", ctx);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"errorsObject\", ctx.serverFieldsErrors);\n        i0.ɵɵadvance(3);\n        i0.ɵɵpropertyInterpolate(\"placeholder\", i0.ɵɵpipeBind1(16, 24, \"register.page.pass\"));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"parentComponentContext\", ctx);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"errorsObject\", ctx.serverFieldsErrors);\n        i0.ɵɵadvance(3);\n        i0.ɵɵpropertyInterpolate(\"placeholder\", i0.ɵɵpipeBind1(22, 26, \"register.page.pass2\"));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"parentComponentContext\", ctx);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"errorsObject\", ctx.serverFieldsErrors);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(30, 28, \"register.page.gdpr\"), \" \");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"parentComponentContext\", ctx);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"errorsObject\", ctx.serverFieldsErrors);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"disabled\", !ctx.register.valid);\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(36, 30, \"register.page.submit\"), \" \");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"parentComponentContext\", ctx);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"errorsObject\", ctx.serverFormError);\n      }\n    },\n    dependencies: [i6.ɵNgNoValidate, i6.DefaultValueAccessor, i6.CheckboxControlValueAccessor, i6.NgControlStatus, i6.NgControlStatusGroup, i6.FormGroupDirective, i6.FormControlName, i7.ServerFieldErrorComponent, i8.ServerFormErrorComponent, i9.LocalFieldErrorComponent, i10.LocalFormErrorComponent, i11.TranslationPipe],\n    styles: [\"form[_ngcontent-%COMP%]   div.gdprAccept[_ngcontent-%COMP%]{margin-top:.5em;margin-bottom:.5em}form[_ngcontent-%COMP%]   div.gdprAccept[_ngcontent-%COMP%]   div.wrap[_ngcontent-%COMP%]{display:flex;align-items:center}form[_ngcontent-%COMP%]   div.gdprAccept[_ngcontent-%COMP%]   div.wrap[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   div.gdprAccept[_ngcontent-%COMP%]   div.wrap[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block}form[_ngcontent-%COMP%]   div.gdprAccept[_ngcontent-%COMP%]   div.wrap[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{flex:0 0;font-size:2em;margin-right:.25em}form[_ngcontent-%COMP%]   div.gdprAccept[_ngcontent-%COMP%]   div.wrap[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:1 1 auto;font-weight:400;font-style:italic;font-size:.875em}\"]\n  });\n  return RegisterComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}