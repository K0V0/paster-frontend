{"ast":null,"code":"import { CookieCrate } from './cookie.crate';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./cookie.service\";\nimport * as i2 from \"./../navigation/widgets.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"./../notification/notification.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"../translate/translate.pipe\";\nfunction CookieComponent_form_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 1);\n    i0.ɵɵlistener(\"ngSubmit\", function CookieComponent_form_0_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.acceptCookies());\n    });\n    i0.ɵɵelementStart(1, \"h2\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"t\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\");\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"t\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"section\")(8, \"figure\");\n    i0.ɵɵelement(9, \"input\", 2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\")(11, \"h3\");\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"t\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"span\");\n    i0.ɵɵtext(15);\n    i0.ɵɵpipe(16, \"t\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(17, \"section\")(18, \"figure\");\n    i0.ɵɵelement(19, \"input\", 3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"div\")(21, \"h3\");\n    i0.ɵɵtext(22);\n    i0.ɵɵpipe(23, \"t\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"span\");\n    i0.ɵɵtext(25);\n    i0.ɵɵpipe(26, \"t\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(27, \"section\", 4)(28, \"button\");\n    i0.ɵɵtext(29);\n    i0.ɵɵpipe(30, \"t\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.cookies);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(3, 8, \"cookies.title\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(6, 10, \"cookies.description\"), \" \");\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(13, 12, \"cookies.settingsBaseTitle\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(16, 14, \"cookies.settingsBaseDescription\"), \" \");\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(23, 16, \"cookies.settingsMarketingTitle\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(26, 18, \"cookies.settingsMarketingDescription\"), \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(30, 20, \"cookies.save\"), \" \");\n  }\n}\nexport let CookieComponent = /*#__PURE__*/(() => {\n  class CookieComponent {\n    constructor(cookiesService, widgetsService, router, notificationService) {\n      this.cookiesService = cookiesService;\n      this.widgetsService = widgetsService;\n      this.router = router;\n      this.notificationService = notificationService;\n      this.askedForCookies = false;\n      this.marketing = new FormControl();\n      this.cookies = new FormGroup({\n        \"marketing\": this.marketing\n      });\n    }\n    ngOnInit() {\n      let cookiesCrate = this.cookiesService.getConsent();\n      this.marketing.setValue(cookiesCrate.marketing);\n    }\n    acceptCookies() {\n      let cookiesCrate = new CookieCrate();\n      cookiesCrate.marketing = this.marketing.value;\n      this.cookiesService.setConsent(cookiesCrate);\n      this.widgetsService.clearAll();\n      // runs as standalone (user initiated change)\n      if (this.router.url == '/cookies') {\n        this.notificationService.notifyTranslated(\"cookies.saved\");\n        const {\n          redirect\n        } = window.history.state;\n        this.router.navigateByUrl(redirect || '/');\n      }\n    }\n  }\n  CookieComponent.ɵfac = function CookieComponent_Factory(t) {\n    return new (t || CookieComponent)(i0.ɵɵdirectiveInject(i1.CookieService), i0.ɵɵdirectiveInject(i2.WidgetsService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.NotificationService));\n  };\n  CookieComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CookieComponent,\n    selectors: [[\"app-cookies\"]],\n    decls: 1,\n    vars: 1,\n    consts: [[\"class\", \"cookies\", 3, \"formGroup\", \"ngSubmit\", 4, \"ngIf\"], [1, \"cookies\", 3, \"formGroup\", \"ngSubmit\"], [\"type\", \"checkbox\", \"name\", \"cookiesBasic\", \"id\", \"cookiesBasic\", \"checked\", \"checked\", \"disabled\", \"\", 1, \"disabled\"], [\"type\", \"checkbox\", \"name\", \"cookiesMarketing\", \"id\", \"cookiesMarketing\", \"formControlName\", \"marketing\"], [1, \"buttons\"]],\n    template: function CookieComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, CookieComponent_form_0_Template, 31, 22, \"form\", 0);\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", !ctx.askedForCookies);\n      }\n    },\n    dependencies: [i5.NgIf, i6.ɵNgNoValidate, i6.CheckboxControlValueAccessor, i6.NgControlStatus, i6.NgControlStatusGroup, i6.FormGroupDirective, i6.FormControlName, i7.TranslationPipe],\n    styles: [\"form[_ngcontent-%COMP%]{background-color:#b0ddff;z-index:99;padding:.75em .5em .125em;border-radius:.5em;box-shadow:0 0 .25em 1px #000}form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:700;margin-bottom:.5em;padding:0 .125em}form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25em}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5em}form[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:400;padding:0 .25em;display:inline-block}form[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{display:flex;align-items:center;margin:1.5em 0}form[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]{margin-right:.5em}form[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:2em}form[_ngcontent-%COMP%]   section.buttons[_ngcontent-%COMP%]{display:block;text-align:right;margin-bottom:.5em}form[_ngcontent-%COMP%]   section.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-weight:700}\"]\n  });\n  return CookieComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}